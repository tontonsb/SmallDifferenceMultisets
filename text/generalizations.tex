The concept of difference multisets can be generalized to non-abelian groups or even any other algebraic structures where \emph{differences} can be defined. Such structures are generally known as \emph{quasigroups}---algebras with a unique solution to $\gamma\cdot\mu=\nu$ (both when solving for $\gamma$ and when solving for $\mu$).

We shall consider right division, but the same logic can be applied to left division in the same manner. The element $\gamma$ of a quasigroup $Q$ must be obtained $\lambda$ times as $(\gamma\cdot\mu)/\mu$. The generalization of \eqref{apparatus:eq:system} is:

    \begin{equation}
        \label{generalization:eq:system}
        \forall \gamma \in Q \colon \sum (n_\mu(n_{\gamma+\mu}-\delta_{\mu,\gamma\mu})) = \lambda
    \end{equation}\
which coincides with system \eqref{apparatus:eq:system} in case of loops (quasigroups with an identity element)---if there is an identity element then $\delta_{\gamma0}=\delta{\mu,\gamma\mu}$.

The digression equation \eqref{apparatus:eq:dsystem} is generally more complex:
    \begin{equation}
        \label{generalization:eq:dsystem}
        \forall \gamma \in Q \colon \sum (d_\mu (d_{\gamma\mu}-\frac{v\delta_{\mu,\gamma\mu}}{\sqrt k})-v\delta_{\mu,\gamma\mu}) = -v.
    \end{equation}

However, in the case of loops system \eqref{generalization:eq:dsystem} simplifies to system \eqref{apparatus:eq:dsystem}.

\subsection{Results}

As the equation \eqref{apparatus:eq:dsystem} applies for loops, the Theorem \ref{general:theorem:limits} is true for all loops.

Theorem \ref{regular:theorem:regular} is also true for loops as it is proved used the equations that also hold for loops. However, we can prove a stronger result.

\begin{theorem}
        \label{generalization:theorem:regular}
        The construction given in Theorem \ref{regular:theorem:regular} produces a difference multiset (with differences being the right divisions) iff $\exists \gamma \colon \forall \mu \colon \mu=\gamma\mu$.
    \end{theorem}
    
    \begin{proof}
        Consider a particular element $\gamma \in Q$. 
        
        Let $Q_\gamma$ be the subset of such elements for which $\gamma$ is left-identity-like:
        \begin{equation}
            \mu=\gamma\mu \iff \mu \in Q_\gamma
        \end{equation}

        Denote $v_\gamma = |Q_\gamma|$ and $\overline{v_\gamma} = v - v_\gamma$.
        
        We can rewrite \eqref{generalization:eq:dsystem} for $\gamma$:
        \begin{equation}
            \label{generalization:eq:dsystem_split}
            \sum\limits_{\mu \in Q} (d_\mu (d_\mu-\frac v {\sqrt k})
            + \sum\limits_{\mu \notin Q} d_\mu d_{\gamma\mu}
             = v(v_\gamma - 1).
        \end{equation}

        Let us try to construct a difference multiset by selecting element $\nu \in Q$ and setting $d_\nu=\pm(v-1)$ and $d_{\mu\neq\nu}=\mp 1$.
        
        If $\nu \in Q_\gamma$ then $v_\gamma \neq 0$ and equation \eqref{generalization:eq:dsystem_split} becomes
        \begin{equation}
            (v-1)(v-1-\frac v {\sqrt k}) 
             + (v_\gamma - 1)(1 + \frac v {\sqrt k})
             + \overline{v_\gamma}
            = v^2 - v + v \frac v {\sqrt k} (v_\gamma-v)
        \end{equation}\
        which is only equal to $v(v_\gamma - 1)$ if $v_\gamma=v$.
        
        If $\nu \notin Q_\gamma$ then $\overline{v_\gamma} \neq 0$ and equation \eqref{generalization:eq:dsystem_split} becomes
        \begin{equation}
            v_\gamma (1 + \frac v {\sqrt k})
             + 2 (1 - v)
             + \overline{v_\gamma} - 2
            = -v + v \frac {v_\gamma} {\sqrt k}
        \end{equation}\
        which is only equal to $v(v_\gamma - 1)$ if $v_\gamma=0$.
        
        The above conditions ($v_\gamma$ always being $0$ or $v$) are satisfied only if there is a left identity element $\gamma$.
    \end{proof}

    The same can be shown for left division difference multisets of same structure which require a right identity element.

\subsection{Other quasigroups of size 3}
Šis vēl jāpārraksta, pagaidām tikai pārvietots uz šejieni.
    \label{sec:v3}
    As mentioned in the opening sections, one might also consider $(\mathbb Z_3,k)$-sum multisets where the elements of $\mathbb Z_3$ must be produced as the sums of elements. This turns out to be a simple case.

    Similarly to \eqref{apparatus:eq:system} we start by writing down the ways to obtain each of the elements and requiring them to be equal ($\forall \gamma \in \mathbb Z_3 \lambda = \sum (n_\mu (n_{\mu-\gamma}-\delta_{\mu,\mu+\gamma}))$). Adding the $\sum n_\mu = k$ and using $3\lambda = k(k-1)$ we may form a system of equations.
    
    \begin{equation}
        \label{v3:other:eq:system}
        \begin{cases}
            n_0 (n_0-1) + 2 n_1 n_2 = \frac{k(k-1)}{3} \\
            n_1 (n_1-1) + 2 n_2 n_0 = \frac{k(k-1)}{3} \\
            n_2 (n_2-1) + 2 n_0 n_1 = \frac{k(k-1)}{3} \\
            n_0 + n_1 + n_2 = k
        \end{cases}
    \end{equation}

    It can be noticed with ease that \eqref{v3:other:eq:system} possesses symmetry with respect to all the elements of $\mathbb Z_3$. Besides this system can easily be solved explicitly -- valid multisets of $n_\mu$ are $\set{\frac k 3, \frac k 3, \frac k 3}$ and $\set{\frac{k-1}{3}, \frac{k-1}{3}, \frac{k+2}{3}}$.
    
    So, we can conclude that there can be at most one (up to automorphisms) $(\mathbb Z_3, k)$-sum multiset for a given value $k$. Specifically there is one if $3 \mid k$ or $k \equiv 1 \mod 3$ and the multiplicities of elements are $\set{\frac k 3, \frac k 3, \frac k 3}$ and $\set{\frac{k-1}{3}, \frac{k-1}{3}, \frac{k+2}{3}}$ respectively. And there are none if $k \equiv 2 \mod 3$ which eerily reminds of the situations with difference multisets over $\mathbb Z_3$ and $\mathbb Z_2^i$.
    
    Recall remark \ref{dms:remark:abelian}. If we consider any other quasigroup of order 3, it turns out that in every case the difference multisets and sum multisets give raise to either system \eqref{v3:eq:constraints} or the system \eqref{v3:other:eq:system}. There are only 5 quasigroups of order 3 so this can be checked on a case by case basis. We have thus solved the problem for every quasigroup of size 3.
    
